<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>一窗通跟踪账号列表</title>
    <link rel="stylesheet" href="./layui/css/layui.css" media="all">
    <script src="./jquery.min.js"></script>
    <script src="./layui/layui.js"></script>
    <style type="text/css">

        #div_window {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -140px;
            margin-left: -175px;
        }

        #sign:hover {
            background-color: #ff9790;
        }
    </style>
</head>
<body>
<div id="div_window">
    <H1 style="text-align:center;font-weight: 300;">跟踪</H1>
    <input placeholder="账号" id="zh" style="border: solid 1px;padding: 2.6px">
    <button id="sign" type="button" onclick="submit()">提交</button>
</div>
<table id="demo"></table>
<script>
    var account = '';

    function submit() {
        account = $('#zh')[0].value;
        document.getElementById('div_window').style.display = "none";
        bitter()
    }

    function bitter() {
        setTimeout(bitter, 1000 * 300);  //每隔30秒刷新一次
        layui.use('table', function () {
            table = layui.table;

            //第一个实例
            table.render({
                elem: '#demo'
                , height: 500, width: 700
                , url: 'https://myip.ipip.net/?user=' + account //数据接口
                , page: true //开启分页
                , cols: [[ //表头
                    {field: 'id', title: '序号', width: 70, fixed: 'center'}
                    , {field: 'account', title: '用户', width: 150, fixed: 'center'}
                    , {field: 'password', title: '账套', width: 150, fixed: 'center'},
                    {field: 'time_scope', title: '开始', sort: true, width: 105, fixed: 'center'}
                    , {field: 'complete_state', title: '结束', sort: true, width: 100, fixed: 'center'},
                    {field: 'unlock', title: '状态', sort: true, width: 95, fixed: 'center'}
                ]], done: function (res) {
                    //渲染数据
                }
            });

        });
    }
</script>
</body>
</html>